---
name: 제공자 대시보드
status: done
created: 2025-12-03T13:45:12Z
updated: 2025-12-04T11:16:00Z
github: [Will be updated when synced to GitHub]
depends_on: [003, 004, 005]
parallel: true
conflicts_with: [006, 008]
---

# Task: 제공자 대시보드

## Description

관광 상품 제공자(Vendor)가 사용하는 대시보드를 구현합니다. 상품 관리, 예약 관리, 캘린더 기반 일정/재고 관리, 메시지 기능을 포함합니다.

## Acceptance Criteria

- [ ] 제공자 대시보드 메인 (요약 통계)
- [ ] 상품 목록/등록/수정/삭제 UI
- [ ] 다국어 상품 정보 입력 폼
- [ ] 이미지 업로드 및 순서 변경
- [ ] 예약 목록 (상태별 필터링)
- [ ] 예약 승인/거절 처리
- [ ] FullCalendar 기반 일정 관리
- [ ] 날짜별 재고 설정
- [ ] 고객 메시지 송수신

## Technical Details

### 페이지 구조

```
resources/views/vendor/
├── dashboard.blade.php          # 메인 대시보드
├── products/
│   ├── index.blade.php          # 상품 목록
│   ├── create.blade.php         # 상품 등록
│   └── edit.blade.php           # 상품 수정
├── bookings/
│   ├── index.blade.php          # 예약 목록
│   └── show.blade.php           # 예약 상세
├── schedules/
│   └── index.blade.php          # 일정 관리 (캘린더)
├── messages/
│   ├── index.blade.php          # 메시지 목록
│   └── show.blade.php           # 메시지 상세
└── layouts/
    └── vendor.blade.php         # 제공자 레이아웃
```

### Vue.js 컴포넌트

```
resources/js/components/vendor/
├── ProductForm.vue              # 상품 등록/수정 폼
├── TranslationTabs.vue          # 다국어 탭 UI
├── ImageUploader.vue            # 이미지 드래그앤드롭 업로드
├── PriceManager.vue             # 가격 옵션 관리
├── BookingTable.vue             # 예약 테이블
├── BookingActions.vue           # 승인/거절 버튼
├── ScheduleCalendar.vue         # FullCalendar 래퍼
├── InventoryEditor.vue          # 재고 편집 모달
└── MessageThread.vue            # 메시지 스레드
```

### ScheduleCalendar.vue (FullCalendar)

```vue
<template>
  <div class="schedule-calendar">
    <FullCalendar
      :options="calendarOptions"
    />

    <!-- 재고 편집 모달 -->
    <InventoryEditor
      v-if="selectedDate"
      :product-id="productId"
      :date="selectedDate"
      :current-count="selectedSchedule?.available_count"
      @save="onSaveInventory"
      @close="selectedDate = null"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import FullCalendar from '@fullcalendar/vue3'
import dayGridPlugin from '@fullcalendar/daygrid'
import interactionPlugin from '@fullcalendar/interaction'

const props = defineProps({
  productId: Number,
  schedules: Array,
  bookings: Array,
})

const selectedDate = ref(null)

const calendarOptions = computed(() => ({
  plugins: [dayGridPlugin, interactionPlugin],
  initialView: 'dayGridMonth',
  locale: 'ko',
  events: generateEvents(),
  dateClick: handleDateClick,
  eventClick: handleEventClick,
}))

function generateEvents() {
  const events = []

  // 재고 이벤트
  props.schedules.forEach(schedule => {
    events.push({
      title: `재고: ${schedule.available_count}`,
      date: schedule.date,
      backgroundColor: schedule.available_count > 0 ? '#10B981' : '#EF4444',
      extendedProps: { type: 'inventory', schedule },
    })
  })

  // 예약 이벤트
  props.bookings.forEach(booking => {
    events.push({
      title: `예약 #${booking.id}`,
      date: booking.schedule.date,
      backgroundColor: getBookingColor(booking.status),
      extendedProps: { type: 'booking', booking },
    })
  })

  return events
}

function handleDateClick(info) {
  selectedDate.value = info.dateStr
}

async function onSaveInventory(data) {
  await axios.put(`/vendor/products/${props.productId}/schedules`, {
    date: data.date,
    available_count: data.count,
    is_active: data.isActive,
  })
  emit('refresh')
  selectedDate.value = null
}
</script>
```

### ProductForm.vue (다국어)

```vue
<template>
  <form @submit.prevent="submitForm" class="product-form">
    <!-- 기본 정보 -->
    <div class="section">
      <h3>기본 정보</h3>
      <select v-model="form.type">
        <option value="day_tour">당일 코스</option>
        <option value="package">숙박 패키지</option>
        <option value="activity">단일 체험</option>
      </select>
      <input v-model="form.region" placeholder="지역" />
      <input v-model="form.duration" type="number" placeholder="소요시간(분)" />
    </div>

    <!-- 다국어 탭 -->
    <TranslationTabs v-model="form.translations" />

    <!-- 가격 설정 -->
    <PriceManager v-model="form.prices" />

    <!-- 이미지 업로드 -->
    <ImageUploader
      v-model="form.images"
      :existing="existingImages"
    />

    <!-- 예약 설정 -->
    <div class="section">
      <h3>예약 설정</h3>
      <label>
        <input type="radio" v-model="form.booking_type" value="instant" />
        자동 확정 (Instant Booking)
      </label>
      <label>
        <input type="radio" v-model="form.booking_type" value="request" />
        승인 필요 (Request Booking)
      </label>
    </div>

    <button type="submit" :disabled="isSubmitting">
      {{ isEdit ? '수정' : '등록' }}
    </button>
  </form>
</template>

<script setup>
// TranslationTabs: ko, en, zh, ja 탭 전환
// 각 탭에서 name, description, includes, excludes 입력
</script>
```

### 라우트

```php
Route::middleware(['auth', 'role:vendor'])->prefix('vendor')->name('vendor.')->group(function () {
    Route::get('/', [VendorDashboardController::class, 'index'])->name('dashboard');

    // 상품
    Route::resource('products', Vendor\ProductController::class);
    Route::post('products/{product}/images', [Vendor\ProductController::class, 'uploadImages']);
    Route::delete('products/{product}/images/{image}', [Vendor\ProductController::class, 'deleteImage']);

    // 예약
    Route::get('bookings', [Vendor\BookingController::class, 'index'])->name('bookings.index');
    Route::get('bookings/{booking}', [Vendor\BookingController::class, 'show'])->name('bookings.show');
    Route::patch('bookings/{booking}/approve', [Vendor\BookingController::class, 'approve']);
    Route::patch('bookings/{booking}/reject', [Vendor\BookingController::class, 'reject']);

    // 일정
    Route::get('schedules', [Vendor\ScheduleController::class, 'index'])->name('schedules.index');
    Route::put('schedules/{product}', [Vendor\ScheduleController::class, 'update']);

    // 메시지
    Route::get('messages', [Vendor\MessageController::class, 'index'])->name('messages.index');
    Route::get('messages/{booking}', [Vendor\MessageController::class, 'show'])->name('messages.show');
    Route::post('messages/{booking}', [Vendor\MessageController::class, 'store']);
});
```

### 대시보드 통계

```php
// app/Http/Controllers/Vendor/DashboardController.php
public function index()
{
    $vendor = auth()->user()->vendor;

    return view('vendor.dashboard', [
        'stats' => [
            'total_products' => $vendor->products()->count(),
            'active_products' => $vendor->products()->where('status', 'active')->count(),
            'pending_bookings' => $vendor->bookings()->where('status', 'pending')->count(),
            'today_bookings' => $vendor->bookings()
                ->whereHas('schedule', fn($q) => $q->whereDate('date', today()))
                ->count(),
            'monthly_bookings' => $vendor->bookings()
                ->whereMonth('created_at', now()->month)
                ->count(),
        ],
        'recent_bookings' => $vendor->bookings()->latest()->limit(5)->get(),
        'unread_messages' => $vendor->messages()->whereNull('read_at')->count(),
    ]);
}
```

## Dependencies

- [ ] Task 003 완료 (인증, 역할)
- [ ] Task 004 완료 (상품 API)
- [ ] Task 005 완료 (예약 API, 일정 API)
- [ ] FullCalendar 패키지 설치됨

## Effort Estimate

- Size: L
- Complexity: Medium
- Parallel: true (Task 006, 008과 충돌 가능 - 공통 컴포넌트)

## Definition of Done

- [ ] 제공자 대시보드 메인 통계 표시
- [ ] 상품 CRUD UI 모두 동작
- [ ] 다국어 상품 정보 입력 동작
- [ ] 이미지 드래그앤드롭 업로드 동작
- [ ] 예약 목록 및 승인/거절 동작
- [ ] 캘린더에서 일정/재고 관리 동작
- [ ] 메시지 송수신 동작
- [ ] 반응형 레이아웃 (태블릿 이상)